<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Prerequisites</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>In this guide you will create a simple application that implements a basic project file scenario. It will consist of a document type, that represents documents used in a project.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a><a class="link" href="#_prerequisites">Prerequisites</a></h3>
<div class="paragraph">
<p>To complete the steps in this guide, you need the following tools installed on your machine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 11 or newer (<a href="https://adoptium.net/" class="bare">https://adoptium.net/</a>). Please use only LTS versions!</p>
</li>
<li>
<p>Apache Maven (<a href="https://maven.apache.org/" class="bare">https://maven.apache.org/</a>)</p>
</li>
<li>
<p>An IDE of your choice (we recommend IntelliJ)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_maven_configuration"><a class="anchor" href="#_maven_configuration"></a><a class="link" href="#_maven_configuration">Maven configuration</a></h3>
<div class="paragraph">
<p>To be able to access the maven artifacts of arveo, you need access to the EITCO Nexus repository.</p>
</div>
<div class="sect3">
<h4 id="_internal"><a class="anchor" href="#_internal"></a><a class="link" href="#_internal">Internal</a></h4>
<div class="paragraph">
<p>When you are inside the company network or the VPN, you can use the internal Nexus that does not require authentication. The following maven settings.xml file shows how to configure the required repositories. The settings.xml file can be found in the <em>.m2</em> directory in your user home directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;
  &lt;pluginGroups&gt;
  &lt;/pluginGroups&gt;
  &lt;proxies&gt;
  &lt;/proxies&gt;
  &lt;servers&gt;
  &lt;/servers&gt;
  &lt;mirrors&gt;
  &lt;/mirrors&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;repos-default&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      &lt;properties&gt;
      &lt;/properties&gt;
      &lt;repositories&gt;
        &lt;repository&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;id&gt;nexus&lt;/id&gt;
          &lt;url&gt;https://nexus-intern.eitco.de/repository/maven-private/&lt;/url&gt;
          &lt;releases&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt; <i class="conum" data-value="2"></i><b>(2)</b>
          &lt;id&gt;nexus&lt;/id&gt;
          &lt;url&gt;https://nexus-intern.eitco.de/repository/maven-private/&lt;/url&gt;
          &lt;releases&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The maven repository that contains maven artifacts of arveo</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The plugin repository that contains maven plugins used when building the demo project</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_external"><a class="anchor" href="#_external"></a><a class="link" href="#_external">External</a></h4>
<div class="paragraph">
<p>When you are outside the company network and the VPN, you need to use the public Nexus repository that requires authentication. To do so, maven requires credentials. For security reasons, the credentials should be encrypted. Follow the instructions in the <a href="https://maven.apache.org/guides/mini/guide-encryption.html">Maven documentation</a> to configure a master password and to create an encrypted password.</p>
</div>
<div class="paragraph">
<p>You should now have created a settings-security.xml file in the <em>.m2</em> directory like the one shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;settingsSecurity&gt;
  &lt;master&gt;{encryped-master-password}&lt;/master&gt;
&lt;/settingsSecurity&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you have to adapt your maven settings.xml as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;
  &lt;pluginGroups&gt;
  &lt;/pluginGroups&gt;
  &lt;proxies&gt;
  &lt;/proxies&gt;
  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;nexus&lt;/id&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      &lt;username&gt;username&lt;/username&gt; <i class="conum" data-value="2"></i><b>(2)</b>
      &lt;password&gt;{your-encrypted-password}&lt;/password&gt; <i class="conum" data-value="3"></i><b>(3)</b>
    &lt;/server&gt;
  &lt;/servers&gt;
  &lt;mirrors&gt;
  &lt;/mirrors&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;repos-default&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      &lt;properties&gt;
        &lt;solr.repositoryUrl&gt;https://nexus.eitco.de/repository/raw-public&lt;/solr.repositoryUrl&gt; <i class="conum" data-value="4"></i><b>(4)</b>
      &lt;/properties&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;nexus&lt;/id&gt; <i class="conum" data-value="5"></i><b>(5)</b>
          &lt;url&gt;https://nexus.eitco.de/repository/maven-private/&lt;/url&gt;
          &lt;releases&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;nexus&lt;/id&gt;
          &lt;url&gt;https://nexus.eitco.de/repository/maven-private/&lt;/url&gt;
          &lt;releases&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The server id is used to tie credentials to repositories</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The username you use to logon to nexus</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The password encrypted by maven using the master password</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Sets the repository to use for the SOLR plugin used in the system tests</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Tells maven to use the credentials for the server with id 'nexus'</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Make sure to use only https repositories when using credentials. Current maven versions already block the usage of
unencrypted repository connections.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_1_type_definitions"><a class="anchor" href="#_step_1_type_definitions"></a><a class="link" href="#_step_1_type_definitions">Step 1 - Type definitions</a></h3>
<div class="paragraph">
<p>In the first step you will define the data model of your application. In arveo, this is done by creating Java
(or Kotlin) interfaces which contain getters and setters for the fields that will be available on each individual entity
type. There is a <a href="https://maven.apache.org/guides/introduction/introduction-to-archetypes.html">maven archetype</a> to create
a project that will contain those type definition interfaces and integration tests to try out the created types.
More information about the archetype can be found <a href="#_archetype_overview">here</a>.</p>
</div>
<div class="paragraph">
<p>First, create a directory that will contain the project files for the demo application. Open a command line in this
directory and perform the following operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn archetype:generate -DarchetypeGroupId=de.eitco.ecr -DarchetypeArtifactId=ecr-types-archetype -DarchetypeVersion=&lt;arveo-version&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The archetype version is the arveo version that you are working with. The current version is 16.0.0-SNAPSHOT.</p>
</div>
<div class="paragraph">
<p>Maven will start by downloading a couple of required artifacts. After that, the archetype plugin will be started in
interactive mode. It will query for several settings required for the generated project. Some of the settings have
default values that can be used.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>class-name-prefix</strong>: A prefix that will be used for the generated classes. Use <em>Demo</em> for this guide.</p>
</li>
<li>
<p><strong>groupId</strong>: The group-id of the artifact that will contain the types. Use <em>de.eitco.demo</em>.</p>
</li>
<li>
<p><strong>artifactId</strong>: The artifact-id of the artifact that will contain the type. Use <em>demo-types</em>.</p>
</li>
<li>
<p><strong>version</strong>: The version of the artifact. You can use the default value.</p>
</li>
<li>
<p><strong>package</strong>: The package that will contain the types. You can use the default value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the last step, the archetype plugin shows the selected property values and asks for confirmation. After the settings are confirmed, the project will be generated in a folder called <em>demo-types</em>.</p>
</div>
<div class="paragraph">
<p>The <a href="#_archetype_overview">archetype documentation</a> contains a description of the generated project. For this guide,
the files in <em>implementation/types</em> are the most important ones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>DemoModel.java:</strong> This file contains the type definition interface. The generated example is a simple document type
with a name, a number and some system properties. The annotations used to define the type are documented
<a href="#type_annotations">here</a>.</p>
</li>
<li>
<p><strong>DemoTypeRegistration.java:</strong> A spring component that automatically registers your type(s) in the arveo service.
Only types that have been registered can be used in your application.</p>
</li>
<li>
<p><strong>spring.factories:</strong> This file tells spring to autoconfigure the DemoRegistration component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The archetype has generated integration tests for the generated type definition, too. You can find them in the directory <em>test/system-test</em>. The file <em>DemoClientIT.java</em> contains some tests that show how to perform basic CRUD operations on the generated document type.</p>
</div>
<div class="paragraph">
<p>You will notice an additional class called <em>DemoModelId</em>. This class demonstrates how to create a typed ID for a specific model class. It is not required for the system to be able to use the <em>DemoModel</em> type. If you do not require typed IDs, you can remove the class.</p>
</div>
<div class="sect3">
<h4 id="_running_the_tests"><a class="anchor" href="#_running_the_tests"></a><a class="link" href="#_running_the_tests">Running the tests</a></h4>
<div class="paragraph">
<p>The tests are run automatically in a full maven build. The system-test module is configured to automatically start a complete arveo system including all required services and a database. If you want to run the tests manually from the IDE, you can still use maven to start the <em>arveo</em> system.Open a command line in the system-test directory and run <code>mvn -Denv</code>. Maven will start the following processes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A PostreSQL database server</p>
</li>
<li>
<p>An ActiveMQ message broker</p>
</li>
<li>
<p>A SOLR server</p>
</li>
<li>
<p>The Service Registry</p>
</li>
<li>
<p>The Configuration Service</p>
</li>
<li>
<p>The User management Service</p>
</li>
<li>
<p>The Audit Service</p>
</li>
<li>
<p>The Access Control Service</p>
</li>
<li>
<p>The <em>arveo</em> Service</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The services will be kept alive until you press <em>enter</em> in the command line.</p>
</div>
<div class="paragraph">
<p>This will only work if a complete build has been performed at least once (which can be done through <code>mvn install</code>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The system set up by maven in the system test module is already configured to contain the type definitions that were
defined in this project. To use those definitions in another system, you have to add the jar containing the definitions
to the classpath of the arveo service instances. This can be done by copying the ja to a lib directory and
adding the following command line option when starting the arveo service instances:
<code>-Dloader.path=path/to/libs</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_adapt_the_model"><a class="anchor" href="#_adapt_the_model"></a><a class="link" href="#_adapt_the_model">Adapt the model</a></h4>
<div class="paragraph">
<p>Now you can adapt the generated type definition so that it fits the requirements for our project scenario. In this
scenario, documents are organized in a two-level folder structure. For example, the project could contain a folder
called "invoices" which again contains two folders named "inbound" and "outbound". Each document is contained in
exactly one folder and belongs to exactly one project. The document type will contain the following meta data fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>projectName</strong>: The name of the project the documents belongs to</p>
</li>
<li>
<p><strong>type</strong>: The type of document, e.g. whether it is an invoice, a contract or something else</p>
</li>
<li>
<p><strong>structureLevel1</strong>: This field is used to represent the first level of the folder structure</p>
</li>
<li>
<p><strong>structureLevel2</strong>: This field is used to represent the second level of the folder structure</p>
</li>
<li>
<p><strong>status</strong>: Represents the current status of the document</p>
</li>
<li>
<p><strong>customerName</strong>: The name of the customer associated to the project</p>
</li>
<li>
<p><strong>contactPerson</strong>: The contact person for the document</p>
</li>
<li>
<p><strong>assignedTo</strong>: The employee currently assigned to work on the document</p>
</li>
<li>
<p><strong>fileSystemCreationDate</strong>: The timestamp at which the file was created in the file system (not the time it was
imported to arveo - see system fields)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to these custom fields, the document will contain some system fields like content metadata (filename, size, mimetype&#8230;&#8203;) and versioning information like creation- and update-timestamps. The two metadata fields name and number that are already contained in DemoModel.java can be removed.</p>
</div>
<div class="sect4">
<h5 id="_adding_getters_for_system_fields"><a class="anchor" href="#_adding_getters_for_system_fields"></a><a class="link" href="#_adding_getters_for_system_fields">Adding getters for system fields</a></h5>
<div class="paragraph">
<p>Complete listings for the steps below can be found at the end of this chapter.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s first add some getters for system fields. Those will provide access to system information that is generated automatically when an entity is created or updated. The generated DemoModel class already contains getters for the ID- and ACL- system properties. Add the following lines to DemoModel.java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@SystemProperty(SystemPropertyName.CONTENT)
Map&lt;String, ContentInformation&gt; getContentInformation();

@SystemProperty(SystemPropertyName.VERSION_INFO)
VersionInformation getVersionInformation();

@SystemProperty(SystemPropertyName.MODIFICATION_INFO)
ModificationInformation getModificationInformation();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JavaDoc for the SystemPropertyName enum constants contains information about each field. The data type for the <em>contentInformation</em> field is a map because each document can contain multiple content elements. For example, a document could contain a TIFF image and a PDF rendition of the TIFF.</p>
</div>
</div>
<div class="sect4">
<h5 id="_adding_getters_and_setters_for_custom_fields"><a class="anchor" href="#_adding_getters_and_setters_for_custom_fields"></a><a class="link" href="#_adding_getters_and_setters_for_custom_fields">Adding getters and setters for custom fields</a></h5>
<div class="paragraph">
<p>Now we can add the getters and setters for the custom metadata fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mandatory
String getProjectName();
void setProjectName(String projectName);

@Mandatory
String getStructureLevel1();
void setStructureLevel1(String structureLevel1);

@Optional
String getStructureLevel2();
void setStructureLevel2(String structureLevel2);

@Optional
String getCustomerName();
void setCustomerName(String customerName);

@Optional
String getContactPerson();
void setContactPerson(String contactPerson);

@Mandatory
ZonedDateTime getFileSystemCreationDate();
void setFileSystemCreationDate(ZonedDateTime fileSystemCreationDate);

@Optional
Long getAssignedTo();
void setAssignedTo(Long assignedTo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotations <code>@Mandatory</code> and <code>@Optional</code> can be used to control which fields have to be set by the client and which can be left empty.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The annotations for the arveo type definitions always have to be added to the getters. You can find an overview of the supported data types <a href="data-types.html">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the <em>type</em> field we want to limit the possible values that can be set. This can be done by defining an enumeration. Create the following enumeration type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package de.eitco.demo.types;

import de.eitco.ecr.type.definition.annotations.Enumeration;

@Enumeration
public enum DemoModelType {
    INVOICE,
    CONTRACT,
    OTHER
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This enum class will be mapped to an enumeration type on the database. It needs to be registered in the type registration just like the DemoModel type. Adapt the class DemoTypeRegistration as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
@Register(DemoModel.class)
@Register(DemoModelType.class)
@Register(DemoModelStatus.class)
public class DemoTypeRegistration implements TypeDefinitionRegistration {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We will do the same for the status field. Add and register the following enum class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Enumeration
public enum DemoModelStatus {
    IN_PROGRESS,
    DONE
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to register it in the DemoTypeRegistration class.</p>
</div>
<div class="paragraph">
<p>Now you can add the getters and setters for the two fields in the DemoModel class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mandatory
DemoModelType getType();
void setType(DemoModelType type);

@Optional
DemoModelStatus getStatus();
void setStatus(DemoModelStatus status);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your DemoModel class should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package de.eitco.demo.types;

import de.eitco.commons.asdl.annotation.AsdlIgnore;
import de.eitco.commons.asdl.annotation.Model;
import de.eitco.commons.user.management.common.model.ModificationInformation;
import de.eitco.ecr.common.ContentInformation;
import de.eitco.ecr.common.VersionInformation;
import de.eitco.ecr.common.document.DocumentId;
import de.eitco.ecr.type.definition.annotations.ObjectType;
import de.eitco.ecr.type.definition.annotations.Type;
import de.eitco.ecr.type.definition.annotations.constraint.Mandatory;
import de.eitco.ecr.type.definition.annotations.constraint.Optional;
import de.eitco.ecr.type.definition.annotations.system.SystemProperty;
import de.eitco.ecr.type.definition.annotations.system.SystemPropertyName;

import java.time.ZonedDateTime;
import java.util.Map;

@Model
@Type(ObjectType.DOCUMENT)
public interface DemoModel {

    @SystemProperty(SystemPropertyName.ID)
    DocumentId getDocumentId();

    @AsdlIgnore
    default DemoModelId id() {

        return DemoModelId.of(getDocumentId());
    }

    @SystemProperty(SystemPropertyName.ACL_ID)
    Long getAclId();
    void setAclId(Long aclId);

    @SystemProperty(SystemPropertyName.CONTENT)
    Map&lt;String, ContentInformation&gt; getContentInformation();

    @SystemProperty(SystemPropertyName.VERSION_INFO)
    VersionInformation getVersionInformation();

    @SystemProperty(SystemPropertyName.MODIFICATION_INFO)
    ModificationInformation getModificationInformation();

    @Mandatory
    String getProjectName();
    void setProjectName(String projectName);

    @Mandatory
    String getStructureLevel1();
    void setStructureLevel1(String structureLevel1);

    @Optional
    String getStructureLevel2();
    void setStructureLevel2(String structureLevel2);

    @Optional
    String getCustomerName();
    void setCustomerName(String customerName);

    @Optional
    String getContactPerson();
    void setContactPerson(String contactPerson);

    @Mandatory
    ZonedDateTime getFileSystemCreationDate();
    void setFileSystemCreationDate(ZonedDateTime fileSystemCreationDate);

    @Mandatory
    DemoModelType getType();
    void setType(DemoModelType type);

    @Optional
    DemoModelStatus getStatus();
    void setStatus(DemoModelStatus status);

    @Optional
    Long getAssignedTo();
    void setAssignedTo(Long assignedTo);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before you can build and use the adapted type, you have to adapt the generated integration tests.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_command_line_tool"><a class="anchor" href="#_step_2_command_line_tool"></a><a class="link" href="#_step_2_command_line_tool">Step 2 - Command line tool</a></h3>
<div class="paragraph">
<p>In the second step you will implement a simple command line application that uses the model defined in step 1. We will use the Spring Initializer to generate a maven project with the required dependencies for a Spring command line application.</p>
</div>
<div class="sect3">
<h4 id="_generating_the_project"><a class="anchor" href="#_generating_the_project"></a><a class="link" href="#_generating_the_project">Generating the project</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://start.spring.io/" class="bare">https://start.spring.io/</a></p>
</li>
<li>
<p>Under "Project", select "Maven Project"</p>
</li>
<li>
<p>Under "Language", select "Java"</p>
</li>
<li>
<p>Select Spring Boot version 3.1.6. If your required version is not available, select the most compatible one in terms of major.minor.patch.</p>
</li>
<li>
<p>Define project metadata. For example, use Group = de.eitco.demo, Artifact = demo-tool, Name = demo-tool, Package name = de.eitco.demo.tool</p>
</li>
<li>
<p>Select "Jar" Packaging</p>
</li>
<li>
<p>Select Java version 11 or newer</p>
</li>
<li>
<p>Add a dependency to "Picocli"</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/spring-initializer.png" alt="spring initializer">
</div>
</div>
<div class="paragraph">
<p>Click Generate and download the zip file containing the generated project. Unzip the file to a directory of your choice and open the project in your IDE. Delete the 'test' directory.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_arveo_dependencies"><a class="anchor" href="#_adding_arveo_dependencies"></a><a class="link" href="#_adding_arveo_dependencies">Adding arveo dependencies</a></h4>
<div class="paragraph">
<p>Open the generated pom.xml file and add the following dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;de.eitco.ecr&lt;/groupId&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;artifactId&gt;ecr-sdk-http&lt;/artifactId&gt;
    &lt;version&gt;16.0.0-SNAPSHOT&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;groupId&gt;de.eitco.commons&lt;/groupId&gt;
            &lt;artifactId&gt;cmn-spring-security5-oauth2-client&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt; <i class="conum" data-value="3"></i><b>(3)</b>
    &lt;groupId&gt;de.eitco.commons&lt;/groupId&gt;
    &lt;artifactId&gt;cmn-spring-security5-oauth2-client-non-web&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;de.eitco.demo&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
    &lt;artifactId&gt;demo-types-types&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This dependency contains a spring boot starter for the arveo SDK</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We have to exclude the OAuth2 client for web applications because the tool will be a console application</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This dependency contains the OAuth2 client for non-web applications</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The data model that was defined in step 1</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You have to set the version of arveo that was used in the project containing the data model.</p>
</div>
<div class="paragraph">
<p>Additionally, you have to define a dependency management for the EITCO Commons Spring Security library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;de.eitco.commons&lt;/groupId&gt;
            &lt;artifactId&gt;cmn-commons-spring-security&lt;/artifactId&gt;
            &lt;version&gt;9.0.3-SNAPSHOT&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_the_tool"><a class="anchor" href="#_implementing_the_tool"></a><a class="link" href="#_implementing_the_tool">Implementing the tool</a></h4>
<div class="paragraph">
<p>The tool will use the picocli library to make it easy to write a command line application with features like usage help and simple parameter binding. You can read more about picocli <a href="https://picocli.info">here</a>.</p>
</div>
<div class="paragraph">
<p>Go to the de.eitco.demo.tool package and create a new class called "ArveoCommand". This will contain the business logic behind the commands available in the command line application. In picocli, those commands need to implement <em>Runnable</em>, so we have to implement this interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component <i class="conum" data-value="1"></i><b>(1)</b>
@CommandLine.Command( <i class="conum" data-value="2"></i><b>(2)</b>
    mixinStandardHelpOptions = true,
    version = "1.0-SNAPSHOT",
    description = "arveo demo tool")
public class ArveoCommand implements Runnable {

    private static final Logger LOGGER = Logger.getLogger(ArveoCommand.class); <i class="conum" data-value="3"></i><b>(3)</b>

    @Override
    public void run() {

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Defines ArveoCommand as an injectable spring component</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Activate picocli features like usage help</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We will use the de.eitco.commons.lang.Logger to log exception messages</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To be able to access arveo, the command line tool will have to authenticate to
the arveo service. We will use a simple username/password authentication, so the user must be able to enter credentials. With picocli, we can implement this with some annotated fields in <em>ArveoCommand</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@CommandLine.Option(names = {"-u", "--username"}, required = true, interactive = true,
    description = "The username used to log on to arveo")
private String username;

@CommandLine.Option(names = {"-p", "--password"}, required = true, interactive = true,
    description = "The password used to log on to arveo")
private String password;

@CommandLine.Option(names = {"-t", "--tenant"}, required = true,
    description = "The tenant used to log on to arveo")
private String tenant;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the interactive=true option, the user will be prompted to enter username and password when the program is running.</p>
</div>
<div class="paragraph">
<p>The ArveoCommand class will need to know the directory to import from and (optionally) a customer name. To be able to access the arveo API, we have to get an instance of the <em>TypeDefinitionServiceClient</em>. This can be done using dependency injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@CommandLine.Option(names = {"-d", "--directory"}, required = true,
    description = "The base directory to import from")
private File baseDirectory;

@CommandLine.Option(names = {"-c", "--customer"}, description = "The name of the customer")
private String customer;

@Autowired
private TypeDefinitionServiceClient typeDefinitionServiceClient;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now it is time to implement the import. Add the following methods to the <em>ArveoCommand</em> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private void importProject(File root) {

    String projectName = root.getName();

    Arrays.stream(root.listFiles()).forEach(file -&gt; {

        if (file.isFile()) {
            LOGGER.warn(() -&gt; "Ignored file " + file);
        } else {
            importLevel1(projectName, file);
        }
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The importProject method will be used to import a project located in the provided root directory. The scenario does not support files located directly in the root of the project, so we will log a warning when we encounter such a file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private void importLevel1(String projectName, File level1) {

    String level1Value = level1.getName();


    Arrays.stream(level1.listFiles()).forEach(file -&gt; {

        if (file.isDirectory()) {
            importLevel2(projectName, level1Value, file);
        } else {
            importFile(projectName, level1Value, null, file);
        }
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The importLevel1 method will collect all files and directories located in the first level of the project structure. Files will be imported directly, directories will be passed to the next importer method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private void importLevel2(String projectName, String level1Value, File level2) {

    String level2Value = level2.getName();

    Arrays.stream(level2.listFiles()).forEach(file -&gt; {

        if (file.isDirectory()) {
            LOGGER.warn(() -&gt; "Ignoring directory " + file);
        } else {
            importFile(projectName, level1Value, level2Value, file);
        }
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method collects all files located in the second level of the project structure. We do not support deeper structures, so we log a warning when we encounter a directory below level 2.</p>
</div>
<div class="paragraph">
<p>The method used to actually import data into arveo is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private void importFile(String projectName, String level1, String level2, File file) {

    AuthenticationHelper.runAsUser(username, password, tenant, () -&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

        TypedDocumentServiceClient&lt;DemoModel&gt; serviceClient = <i class="conum" data-value="2"></i><b>(2)</b>
            typeDefinitionServiceClient.getDocumentServiceClient().byClass(DemoModel.class);

        DemoModel model = serviceClient.createTypeInstance(); <i class="conum" data-value="3"></i><b>(3)</b>

        model.setProjectName(projectName);
        model.setStructureLevel1(level1);
        model.setStructureLevel2(level2);
        model.setCustomerName(customer);

        model.setFileSystemCreationDate(ZonedDateTime.ofInstant(
            Instant.ofEpochMilli(file.lastModified()),
            ZoneId.systemDefault())
        );

        DemoModelType type = DemoModelType.OTHER; <i class="conum" data-value="4"></i><b>(4)</b>

        String fileName = file.getName();

        if (fileName.startsWith(DemoModelType.CONTRACT.name())) {
            type = DemoModelType.CONTRACT;
        } else if (fileName.startsWith(DemoModelType.INVOICE.name())) {
            type = DemoModelType.INVOICE;
        }

        model.setType(type);

        try (InputStream stream = Files.newInputStream(file.toPath())) {

            ContentUpload contentUpload = new ContentUpload(fileName, stream);
            Map&lt;String, ContentUpload&gt; contentElements = Map.of("content", contentUpload); <i class="conum" data-value="5"></i><b>(5)</b>


            serviceClient.create(new TypedDocumentInput&lt;&gt;(contentElements, model)); <i class="conum" data-value="6"></i><b>(6)</b>
            System.out.println("Imported file " + fileName + " belonging to project " + projectName);

        } catch (IOException e) {
            LOGGER.exception(e);
        }
    });
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>AuthenticationHelper</code> takes care of populating spring&#8217;s security context with the required credentials. The OAuth2 client will use the provided username and password to retrieve an access token from the authentication service to authenticate the requests to the arveo service.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We use the injected TypeDefinitionServiceClient to get a service client for the type definition of our model class.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The service client can provide an instance of the interface defining the model. This instance is then populated
with the metadata.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We will use a simple file name prefix to determine the type of the document.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Here we define the content elements of the new document</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Finally we send the create request to the arveo service</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can now implement the run() method of the ArveoCommand class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public void run() {

    if (!baseDirectory.isDirectory()) {
        throw new IllegalArgumentException("Base directory option must point to a directory.");
    }

    Arrays.stream(baseDirectory.listFiles(File::isDirectory)).forEach(this::importProject); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We use a filter to ignore files in the base directory as they obviously do not belong to any project</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we have to adapt the application class that was generated by the spring initializer. Spring provides a <em>CommandLineRunner</em> interface for command line applications. Adapt the <em>DemoToolApplication</em> class as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@SpringBootApplication
public class DemoToolApplication implements CommandLineRunner {

	@Autowired
	private ArveoCommand arveoCommand;

	public static void main(String[] args) {
		new SpringApplicationBuilder(DemoToolApplication.class)
			.web(WebApplicationType.NONE) <i class="conum" data-value="1"></i><b>(1)</b>
			.run(args);
	}

	@Override
	public void run(String... args) throws Exception {

		new CommandLine(arveoCommand).execute(args); <i class="conum" data-value="2"></i><b>(2)</b>
		System.exit(1);
	}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Turns off spring boot web features that are not required in a command line application</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Initialize the picocli command line and execute our command with the options from the command line</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the last step, we have to set some configuration properties for our command line tool. Rename the generated <em>application.properties</em> file in src/main/resource to <em>application.yaml</em> and add the following settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">spring:
  security:
    oauth2:
      client:
        registration:
          cmn-user-service-client: <i class="conum" data-value="1"></i><b>(1)</b>
            provider: user-service
            client-id: "test-client"
            client-secret: "my-secret"
            authorization-grant-type: "password"
            scope: "arveo"
        provider:
          user-service: <i class="conum" data-value="2"></i><b>(2)</b>
            authorization-uri: "http://localhost:39004/oauth/auth"
            token-uri: "http://localhost:39004/oauth/token"

eureka:
  client:
    registerWithEureka: false <i class="conum" data-value="3"></i><b>(3)</b>

logging: <i class="conum" data-value="4"></i><b>(4)</b>
  file:
    name: "demo-tool.log"
  level:
    root: ERROR</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Configures an OAuth2 client that uses the resource owner password grant type. Client-id and secret are configured
in the test system provided by the system test module of the project created in step 1.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Tells the OAuth2 client where to get a token from</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The command line tool should not register itself in the service registry</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Log only errors to a file</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_building_and_running_the_tool"><a class="anchor" href="#_building_and_running_the_tool"></a><a class="link" href="#_building_and_running_the_tool">Building and running the tool</a></h4>
<div class="paragraph">
<p>Now we can build and run the command line tool. You can either use the IDE or run <code>mvn clean install</code> in a command line for the project containing the demo tool. After the build has finished, you have to start the test system. Open a command line in the system-test module of the type definition project and execute the command <code>mvn -Denv</code> (see <a href="#_running_the_tests">Running the tests</a>). Now we can use another command line in the target directory of the command line tool project to run the tool. Running <code>java -jar .\demo-tool-0.0.1-SNAPSHOT.jar</code> prints out usage help for the tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; java -jar .\demo-tool-0.0.1-SNAPSHOT.jar

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.5.8)

Missing required options: '--username', '--password', '--directory=&lt;baseDirectory&gt;'
Usage: &lt;main class&gt; [-hV] -p -u [-c=&lt;customer&gt;] -d=&lt;baseDirectory&gt; [-t=&lt;tenant&gt;]
arveo demo tool
  -c, --customer=&lt;customer&gt;
                          The name of the customer
  -d, --directory=&lt;baseDirectory&gt;
                          The base directory to import from
  -h, --help              Show this help message and exit.
  -p, --password          The password used to log on to arveo
  -t, --tenant=&lt;tenant&gt;   The tenant used to log on to arveo
  -u, --username          The username used to log on to arveo
  -V, --version           Print version information and exit.</pre>
</div>
</div>
<div class="paragraph">
<p>The test system already contains a user that can be used for testing. The user&#8217;s credentials are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>username:</strong> ecr-user</p>
</li>
<li>
<p><strong>password:</strong> password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how to use the tool to import projects from a folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; java -jar .\demo-tool-0.0.1-SNAPSHOT.jar -p -u -t=integrationtest -c=Customer1 "-d=C:\test-data\"

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.5.8)

Enter value for --password (The password used to log on to arveo):
Enter value for --username (The username used to log on to arveo):
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by de.eitco.commons.reflection.MethodLookup to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)
WARNING: Please consider reporting this to the maintainers of de.eitco.commons.reflection.MethodLookup
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
Imported file INVOICE_invoice1.txt belonging to project TestProject1
Imported file INVOICE_invoice2.txt belonging to project TestProject1
Imported file customer meeting 1.txt belonging to project TestProject1
Imported file standup 1.txt belonging to project TestProject1
Imported file standup 2.txt belonging to project TestProject1
Imported file standup 3.txt belonging to project TestProject1
Imported file uncategorized meeting 1.txt belonging to project TestProject1</pre>
</div>
</div>
<div class="paragraph">
<p>The warning message can be ignored. The reflective access operation will be replaced in a future version.</p>
</div>
<div class="paragraph">
<p>Finally, here is a complete listing of the ArveoCommand class for copy&amp;paste:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package de.eitco.demo.tool;

import de.eitco.commons.lang.Logger;
import de.eitco.commons.spring.security.AuthenticationHelper;
import de.eitco.demo.types.DemoModel;
import de.eitco.demo.types.DemoModelType;
import de.eitco.ecr.common.ContentUpload;
import de.eitco.ecr.sdk.TypeDefinitionServiceClient;
import de.eitco.ecr.sdk.document.TypedDocumentInput;
import de.eitco.ecr.sdk.document.TypedDocumentServiceClient;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import picocli.CommandLine;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.time.Instant;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.util.Arrays;
import java.util.Map;

@Component
@CommandLine.Command(
    mixinStandardHelpOptions = true,
    version = "1.0-SNAPSHOT",
    description = "arveo demo tool")
public class ArveoCommand implements Runnable {

    private static final Logger LOGGER = Logger.getLogger(ArveoCommand.class);

    @CommandLine.Option(names = {"-u", "--username"}, required = true, interactive = true,
        description = "The username used to log on to arveo")
    private String username;

    @CommandLine.Option(names = {"-p", "--password"}, required = true, interactive = true,
        description = "The password used to log on to arveo")
    private String password;

    @CommandLine.Option(names = {"-t", "--tenant"}, required = true,
        description = "The tenant used to log on to arveo")
    private String tenant;

    @CommandLine.Option(names = {"-d", "--directory"}, required = true,
        description = "The base directory to import from")
    private File baseDirectory;

    @CommandLine.Option(names = {"-c", "--customer"}, description = "The name of the customer")
    private String customer;

    @Autowired
    private TypeDefinitionServiceClient typeDefinitionServiceClient;

    @Override
    public void run() {

        if (!baseDirectory.isDirectory()) {
            throw new IllegalArgumentException("Base directory option must point to a directory.");
        }

        Arrays.stream(baseDirectory.listFiles(File::isDirectory)).forEach(this::importProject);
    }

    private void importProject(File root) {

        String projectName = root.getName();

        Arrays.stream(root.listFiles()).forEach(file -&gt; {

            if (file.isFile()) {
                LOGGER.warn(() -&gt; "Ignored file " + file);
            } else {
                importLevel1(projectName, file);
            }
        });
    }

    private void importLevel1(String projectName, File level1) {

        String level1Value = level1.getName();


        Arrays.stream(level1.listFiles()).forEach(file -&gt; {

            if (file.isDirectory()) {
                importLevel2(projectName, level1Value, file);
            } else {
                importFile(projectName, level1Value, null, file);
            }
        });
    }

    private void importLevel2(String projectName, String level1Value, File level2) {

        String level2Value = level2.getName();

        Arrays.stream(level2.listFiles()).forEach(file -&gt; {

            if (file.isDirectory()) {
                LOGGER.warn(() -&gt; "Ignoring directory " + file);
            } else {
                importFile(projectName, level1Value, level2Value, file);
            }
        });
    }

    private void importFile(String projectName, String level1, String level2, File file) {

        AuthenticationHelper.runAsUser(username, password, tenant, () -&gt; {

            TypedDocumentServiceClient&lt;DemoModel&gt; serviceClient =
                typeDefinitionServiceClient.getDocumentServiceClient().byClass(DemoModel.class);

            DemoModel model = serviceClient.createTypeInstance();

            model.setProjectName(projectName);
            model.setStructureLevel1(level1);
            model.setStructureLevel2(level2);
            model.setCustomerName(customer);

            model.setFileSystemCreationDate(ZonedDateTime.ofInstant(
                Instant.ofEpochMilli(file.lastModified()),
                ZoneId.systemDefault())
            );

            DemoModelType type = DemoModelType.OTHER;

            String fileName = file.getName();

            if (fileName.startsWith(DemoModelType.CONTRACT.name())) {
                type = DemoModelType.CONTRACT;
            } else if (fileName.startsWith(DemoModelType.INVOICE.name())) {
                type = DemoModelType.INVOICE;
            }

            model.setType(type);

            try (InputStream stream = Files.newInputStream(file.toPath())) {

                ContentUpload contentUpload = new ContentUpload(fileName, stream);
                Map&lt;String, ContentUpload&gt; contentElements = Map.of("content", contentUpload);


                serviceClient.create(new TypedDocumentInput&lt;&gt;(contentElements, model));
                System.out.println("Imported file " + fileName + " belonging to project " + projectName);

            } catch (IOException e) {
                LOGGER.exception(e);
            }
        });
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_perform_a_task_with_arveo"><a class="anchor" href="#_step_3_perform_a_task_with_arveo"></a><a class="link" href="#_step_3_perform_a_task_with_arveo">Step 3 - Perform a task with arveo</a></h3>
<div class="paragraph">
<p>In the third step you will perform a specific task using arveo.</p>
</div>
<div class="sect3">
<h4 id="_creating_a_standardized_project_structure"><a class="anchor" href="#_creating_a_standardized_project_structure"></a><a class="link" href="#_creating_a_standardized_project_structure">Creating a standardized project structure</a></h4>
<div class="paragraph">
<p>Your project structure must have a certain structure to be successfully imported and/or archived in arveo.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/project_structure.png" alt="project structure" width="154" height="152">
</div>
<div class="title">Figure 1. Required project structure</div>
</div>
<div class="paragraph">
<p>Here is an example of implementing this structure:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/project_example.png" alt="project example" width="229" height="169">
</div>
<div class="title">Figure 2. Examplary project structure</div>
</div>
<div class="paragraph">
<p>In the last step of the tutorial you executed the Maven command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; java -jar .\demo-tool-0.0.1-SNAPSHOT.jar -p -u -t=integrationtest -c=Customer1 "-d=C:\test-data\"</pre>
</div>
</div>
<div class="paragraph">
<p>Now you can replace the last element with your actual project folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; java -jar .\demo-tool-0.0.1-SNAPSHOT.jar -p -u -t=integrationtest -c=MedicalInsuranceAG "-d=C:\Projects"</pre>
</div>
</div>
<div class="paragraph">
<p>After this command has been executed, you will see the report about imported files and folders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Enter value for --password (The password used to log on to arveo):
Enter value for --username (The username used to log on to arveo):
...
Imported file Orders - Received_invoices.png belonging to project Webclient
Imported file Incoming_invoice.png belonging to project Webclient
...</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_types_archetype"><a class="anchor" href="#_the_types_archetype"></a><a class="link" href="#_the_types_archetype">The Types archetype</a></h3>
<div id="_archetype_overview" class="paragraph">
<p>This archetype creates a rather small project. It consists of an arveo scenario and tests for that.</p>
</div>
<div class="paragraph">
<p>The maven coordinate of this archetype are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;groupId&gt;de.eitco.ecr&lt;/groupId&gt;
    &lt;artifactId&gt;ecr-types-archetype&lt;/artifactId&gt;
    &lt;version&gt;{project-technical-version}&lt;/version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create an arveo scenario project use the maven archetype plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn archetype:generate -DarchetypeGroupId=de.eitco.ecr -DarchetypeArtifactId=ecr-types-archetype -DarchetypeVersion={project-technical-version}</pre>
</div>
</div>
<div class="paragraph">
<p>Here, the variable {project-technical-version} must be replaced with the actual version, f.e. 5.0.1.</p>
</div>
<div class="paragraph">
<p>Also, you have to remember, that this will generate a project structure into a project folder. So before you type this command in your command line, make sure you have prepared a folder where your project structure is going to be and you have switched into this folder on your command line.</p>
</div>
<div class="paragraph">
<p>This will start a process that will ask for some parameters and then generate a maven project according to the parameters. The following parameters will be asked for:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven groupId of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>artifactId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven artifactId of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven version of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class-name-prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A prefix for the names of the generated classes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scm-locator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location in the eitco bitbucket server where the sources are (or will be). For a project located in <a href="https://git.eitco.de/scm/&lt;project&gt;/&lt;repository&gt;.git" class="bare">https://git.eitco.de/scm/&lt;project&gt;/&lt;repository&gt;.git</a>, this would be <code>&lt;project&gt;/&lt;repository&gt;.git</code>. This configures the maven release plugin. If this is omitted (or set to a wrong value) the project will work for now - however the release process will not work - unless it is fixed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some or all of these parameters can also be given on the commandline via <code>-D</code>. The process will not ask for parameters given by command line. So the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn archetype:generate -DarchetypeGroupId=de.eitco.ecr -DarchetypeArtifactId=ecr-types-archetype -DarchetypeVersion={project-technical-version} -DgroupId=my.group.id -DartifactId=my-artifact-id -Dversion=0.0.1-SNAPSHOT -Dclass-name-prefix=My -Dscm-locator=prj/repo.git</pre>
</div>
</div>
<div class="paragraph">
<p>would not ask for any parameters and just create the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_overview_of_the_generated_project"><a class="anchor" href="#_overview_of_the_generated_project"></a><a class="link" href="#_overview_of_the_generated_project">Overview of the generated project</a></h3>
<div class="paragraph">
<p>The project generated by the archetype will consist of two modules:</p>
</div>
<div class="sect3">
<h4 id="_implementationtypes"><a class="anchor" href="#_implementationtypes"></a><a class="link" href="#_implementationtypes">implementation\types</a></h4>
<div class="paragraph">
<p>This module contains your arveo scenario. An example type will be created with the name &lt;class-name-prefix&gt;Model. You can define more types here, but you will need to register them in register in &lt;class-name-prefix&gt;TypeRegistration. The chapter <a href="#_objects_types_definitions"><strong>arveo type definitions</strong></a> describes how to define types.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testsystem_test"><a class="anchor" href="#_testsystem_test"></a><a class="link" href="#_testsystem_test">test\system-test</a></h4>
<div class="paragraph">
<p>This module contains tests for your scenario. These tests will be executed in the build. For that a complete arveo environment will be created, so you can add tests, that simply connect to arveo by the http client and can assume that your scenario is deployed.</p>
</div>
<div class="paragraph">
<p>This module can also be used to set up an arveo environment with your scenario on which you can then run tests manually. In the module run</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn -Denv</pre>
</div>
</div>
<div class="paragraph">
<p>to set up the environment. It will be torn down when you press &lt;enter&gt; in the console.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_full_featured_archetype"><a class="anchor" href="#_the_full_featured_archetype"></a><a class="link" href="#_the_full_featured_archetype">The full-featured archetype</a></h3>
<div class="paragraph">
<p>This archetype creates a more complex project. It is based on the eitco commons archetype It will contain a simple web service, with an automatically generated client layer, based on eitco commons.
The maven coordinate of this archetype are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">    &lt;groupId&gt;de.eitco.ecr&lt;/groupId&gt;
    &lt;artifactId&gt;ecr-service-archetype&lt;/artifactId&gt;
    &lt;version&gt;{project-technical-version}&lt;/version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create an arveo based service project use the maven archetype plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn archetype:generate -DarchetypeGroupId=de.eitco.ecr -DarchetypeArtifactId=ecr-service-archetype -DarchetypeVersion={project-technical-version}</pre>
</div>
</div>
<div class="paragraph">
<p>This will start a process that will ask for some parameters and then generate a maven project according to the parameters. The following parameters will be asked for:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven groupId of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>artifactId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven artifactId of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maven version of the new project</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class-name-prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A prefix for the names of the generated classes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scm-locator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location in the eitco bitbucket server where the sources are (or will be). For a project located in <a href="https://git.eitco.de/scm/&lt;project&gt;/&lt;repository&gt;.git" class="bare">https://git.eitco.de/scm/&lt;project&gt;/&lt;repository&gt;.git</a>, this would be <code>&lt;project&gt;/&lt;repository&gt;.git</code>. This configures the maven release plugin. If this is omitted (or set to a wrong value) the project will work for now - however the release process will not work - unless it is fixed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disable-optional-features</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">when set to false, it will create a little more complex project, including the audit service, the user-management enterprise service and jmeter samplers. If set to true (the default value) these features will be disabled but can be activated by uncommenting certain source locations.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some or all of these parameters can also be given on the commandline via <code>-D</code>. The process will not ask for parameters given by command line. So the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn archetype:generate -DarchetypeGroupId=de.eitco.ecr -DarchetypeArtifactId=ecr-service-archetype -DarchetypeVersion={project-technical-version} -DgroupId=my.group.id -DartifactId=my-artifact-id -Dversion=0.0.1-SNAPSHOT -Dclass-name-prefix=My -Dscm-locator=prj/repo.git -Ddisable-optional-features=false</pre>
</div>
</div>
<div class="paragraph">
<p>would not ask for any parameters and just create the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_overview_of_the_generated_project_2"><a class="anchor" href="#_overview_of_the_generated_project_2"></a><a class="link" href="#_overview_of_the_generated_project_2">Overview of the generated project</a></h3>
<div class="paragraph">
<p>The project generated by the archetype will consist of four modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>documentation</code></p>
</li>
<li>
<p><code>implementation</code></p>
</li>
<li>
<p><code>packaging</code></p>
</li>
<li>
<p><code>test</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_the_documentation_module"><a class="anchor" href="#_the_documentation_module"></a><a class="link" href="#_the_documentation_module">The documentation module</a></h4>
<div class="paragraph">
<p>This module holds a frame for an asciidoc based documentation of your project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_implementation_module"><a class="anchor" href="#_the_implementation_module"></a><a class="link" href="#_the_implementation_module">The implementation module</a></h4>
<div class="paragraph">
<p>This module contains the actual source code. It is separated into five submodules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>common</code></p>
<div class="ulist">
<ul>
<li>
<p>This submodule contains classes that are available on the server side as well as the client side.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>generated</code></p>
<div class="ulist">
<ul>
<li>
<p>This submodule contains modules that are automatically generated.</p>
</li>
<li>
<p>Normally developers will not add code in these modules.</p>
<div class="ulist">
<ul>
<li>
<p>They are however relevant for building the project.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The following submodules exist</p>
<div class="ulist">
<ul>
<li>
<p>serialization</p>
<div class="ulist">
<ul>
<li>
<p>This submodule contains automatically generated serialization meta information.</p>
</li>
</ul>
</div>
</li>
<li>
<p>client</p>
<div class="ulist">
<ul>
<li>
<p>This submodule contains a few submodules itself, holding client side applications for:</p>
<div class="ulist">
<ul>
<li>
<p>a java spring based http client api,</p>
</li>
<li>
<p>a java spring based embedded client api,</p>
</li>
<li>
<p>a typescript http client api.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>jmeter-sampler</p>
<div class="ulist">
<ul>
<li>
<p>This submodule generated jmeter samplers of the services api, usable in load tests.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>server</code></p>
<div class="ulist">
<ul>
<li>
<p>This submodule contains the server side implementation.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>types</code></p>
<div class="ulist">
<ul>
<li>
<p>this submodule contains the arveo based model. The generated interface named &lt;class-name-prefix&gt;Model describes an  <a href="#_objects_types_definitions"><strong>arveo type definition</strong></a> as will every interface you register in &lt;class-name-prefix&gt;TypeRegistration. The jar compiled by this module will be available on the server side and client side. Additionally, it needs to be in the class path of your arveo instance. For the system tests (se below) this is already taken care of.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_the_packaging_module"><a class="anchor" href="#_the_packaging_module"></a><a class="link" href="#_the_packaging_module">The packaging module</a></h4>
<div class="paragraph">
<p>This module contains delivery artifacts to deliver the service to or with different runtimes. This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a stand-alone jar</p>
</li>
<li>
<p>a java web archive (war)</p>
</li>
<li>
<p>a helm chart for deployment in a kubernetes cluster</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_the_test_module"><a class="anchor" href="#_the_test_module"></a><a class="link" href="#_the_test_module">The test module</a></h4>
<div class="paragraph">
<p>This module contains a system test module. When building this module maven will start a complete arveo system (containing all required services) with the newly generated service in the <code>pre-integration-test</code>-phase so that tests written here (like the generated example &lt;class-name-prefix&gt;ClientIT) may simply call the new service via the generated http-client (see above).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_working_on_the_generated_project"><a class="anchor" href="#_working_on_the_generated_project"></a><a class="link" href="#_working_on_the_generated_project">Working on the generated project</a></h3>
<div class="paragraph">
<p>Most implementation will be done in the implementation\server module since this contains the server side code. You api and model will be defined in the implementation\common and implementation\types modules. The later will only be used for classes that are part of your arveo model and need to be in the classpath of arveo.</p>
</div>
<div class="paragraph">
<p>When testing your code, the test\system-test module comes in handy. As mentioned above, it will start a complete arveo system so that your tests can simply use the generated http client api to test your functionality. However, you can use this to manually test and debug your service, too. In case you simply need to start up the environment, in the test\system-test directory call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn -Denv</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to debug your service call</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn -Denv -Dservice.skip</pre>
</div>
</div>
<div class="paragraph">
<p>This will start the environment except for your service. You can then start your service in debug mode from your IDE.</p>
</div>
<div class="paragraph">
<p>In both cases you can now start tests manually or call the service api directly to test your code.</p>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-12-15 09:55:14 UTC
</div>
</div>
</body>
</html>