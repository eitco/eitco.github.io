<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entity types :: arveo Documentation</title>
    <link rel="canonical" href="https://eitco.github.io/arveo-docu/arveo-developer/entity-types.html">
    <link rel="prev" href="permissions.html">
    <link rel="next" href="entity-annotations.html">
    <meta name="generator" content="Antora 3.2.0-alpha.4">
    <link rel="stylesheet" href="../../ui-assets/css/site.css">
    <link rel="stylesheet" href="../../ui-assets/css/custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand"> 
      <img src="../../ui-assets/img/arveo_WortBildmarke_NEG_500px.png" id="arveoLogo" style="vertical-align:middle;margin:10px 0px">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://eitco.github.io">Home</a>
        <!--<div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>-->
        <!--<div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>-->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="arveo-docu" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../arveo-general/product-summary.html">arveo Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../arveo-general/product-summary.html">What is <em>arveo</em> - Content Services Platform (CSP)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Architecture Overview</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/content-services.html">Content Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/technology-stack.html">Opensource Technology Stack</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/application-security.html">Application security</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/gobd.html">Compliance recommendations (GoBD)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Store</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/data-storage.html">Persistence architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-general/data-deletion.html">Data deletion</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-getting-started/getting-started.html">Getting Started</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration und Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../arveo-administration/installation.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/deployment-options.html">Deployment options</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/system-requirements.html">System requirements</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/authentication-oauth2.html">OAuth Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/db-access.html">Database access</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/content-elements-storage.html">Storage locations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/renditions.html">Renditions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/retention-container.html">Retention and Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/encryption.html">Encryption</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/messaging.html">Configure Active MQ</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/maintenance-mode-db-schema.html">Maintenance mode for the database schema</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/audit.html">Audit</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/solr.html">Solr</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/jobs.html">System jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/vault.html">Using Hashicorp Vault</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../commons/configuration-properties.html">Configuration Properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../arveo-administration/monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Access Control</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="access-rights.html">Access rights</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="attribute-based-security.html">Attribute Based Access Control (ABAC)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="permissions.html">Permissions on Type definitions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Modelling</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="entity-types.html">Entity types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="entity-annotations.html">Entity annotations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="data-types.html">Data types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="system-fields.html">System fields</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="document-types.html">Document types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="container-types.html">Container types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="relation-types.html">Relation types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="folder-types.html">Folder types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="metadata-types.html">Metadata types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="inheritance.html">Inheritance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="retention-annotations.html">Retention document types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tenant-separation.html">Tenant separation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="advanced-schema-changes.html">Advanced database schema changes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="repo-service.html">Repository Service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repo-service-upload-data.html">Upload Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repo-service-download-data.html">Download Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repo-service-delete-objects.html">Delete Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repo-service-locking.html">Locking</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="repo-service-download-links-external-users.html">Download Links for External Users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="search-service.html">Search language</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="retention-introduction.html">Retention</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="retention.html">Retention periods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="retention-cleanup-job.html">Cleanup job</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDKs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="client-sdks-json-serialization.html">Client SDKs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sdk-and-batch-operations.html">Java SDK for Spring applications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="non-spring-sdk.html">Java SDK for non-Spring applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Events and messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="integration-service.html">Enterprise Integration Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archetypes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="slim-archetype.html">The Types archetype</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="full-featured-archetype.html">The full-featured archetype</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="system-tables.html">System Tables</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/compatibility-list.html">Compatibility List</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/release-notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/glossary.html">Important Terminology</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">arveo Documentation</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../arveo-general/product-summary.html">arveo Documentation</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../arveo-general/product-summary.html">arveo Documentation</a></li>
    <li>Developer</li>
    <li>Data Modelling</li>
    <li><a href="entity-types.html">Entity types</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Entity types</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The following chapter defines entity types and type definitions, used in <em>arveo</em>.</p>
</div>
<div class="paragraph">
<p>To be able to store objects in the database we define a class for entity definitions.So an entity represents a type of data structure used in the <em>arveo</em>.There are five supported entity types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Document</strong>: an entity that can contain metadata and content. Documents are the only objects that can have content, the content may be binary. Documents can be contained in folders (<a href="document-types.html#_document_type" class="xref page"><strong>Document</strong></a>).</p>
</li>
<li>
<p><strong>Container</strong>: simple folder-like object not organized in a tree structure but with relations to other objects. A Container contains only metadata and cannot be contained in a folder (<a href="container-types.html#_container_type" class="xref page"><strong>Container</strong></a>).</p>
</li>
<li>
<p><strong>Relation</strong>: an entity that represents a relation between two other entities. A relation can contain metadata (<a href="relation-types.html#_relation_type" class="xref page"><strong>Relation</strong></a>).</p>
</li>
<li>
<p><strong>Folder</strong>: an entity that contains metadata and is organized in a tree structure like in a file system (<a href="folder-types.html#_folder_type" class="xref page"><strong>Folder</strong></a>)</p>
</li>
<li>
<p><strong>Meta</strong>: an entity that contains only metadata. Unlike containers, metadata entities do not support system attributes like ID and creation date (<a href="metadata-types.html#_metadata_type" class="xref page"><strong>Metadata</strong></a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each type definition is represented by one (or more) tables in the database.</p>
</div>
<div class="paragraph">
<p>Each entity is referred by its system-wide unique id, which consists of a system id and its type definition id, followed by the sequential database id of this entity:</p>
</div>
<div class="paragraph">
<p>[12bit System id][14bit Type Definition id][38bit Entity id].</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="versioned_entities"><a class="anchor" href="#versioned_entities"></a>Versioned entities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All above listed entities (except for meta) are versioned by default. It means that they store version information, modification information. The class <em>VersionInformation</em> combines information about a version, including version id, version number and version comment. The version modification object stores a modification stamp, consisting of a user id and a <em>ZonedDateTime</em> object, both for the events of creation and last modification of the entity. The version information is stored in a separate table for each typed entity.</p>
</div>
<div class="paragraph">
<p>When specifying a type definition, you can decide which attributes of this type definition are versioned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If none of the attributes are versioned, the entire object is not versioned.
For the type <em>Document</em> the content changes are always versioned.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom_types"><a class="anchor" href="#custom_types"></a>Custom types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can make your class a type and add features by annotating your classes. You can define the custom metadata schema with simple getter and setter methods.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When you start a project you have to create your own types. Simply annotate the class with the TYPE annotation and define your schema with type safe getter/setter methods (<a href="#_entity_types_examples"><strong>Example</strong></a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can find the <em>arveo</em>-specific annotations in the module <code>type-definition-annotations</code>. The goal is to create a type, and specify its properties. So annotations precisely define the behavior of the type definitions. When defining a type, a database table is created. To achieve this, you annotate the type definition with <em>@Type</em>. There is an exception to that: when annotating with <em>@View</em> or <em>@Partial_View</em>, no database table is created.</p>
</div>
<div class="paragraph">
<p>There are 2 types of annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>annotations on types (interfaces): <em>@Target({ElementType.TYPE, ElementType.ANNOTATION_TYPE})</em></p>
</li>
<li>
<p>annotations on properties (getter-methods): <em>@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some annotations can be used both on interfaces and on getter-methods. The annotation <em>ElementType.ANNOTATION_TYPE</em> is used for inherited annotations.
The following annotation groups are used in <em>arveo</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>constraint</strong>: contains annotations that define specific properties or behaviour of attributes;</p>
</li>
<li>
<p><strong>defaults</strong>: contains annotations that define default values of attributes;</p>
</li>
<li>
<p><strong>index</strong>: contains annotations that define indexes on type definitions;</p>
</li>
<li>
<p><strong>naming</strong>: contains annotations that specify names for tables,
attribute definitions, type definitions, enumeration types and enumeration values;</p>
</li>
<li>
<p><strong>reference</strong>: contains annotations that specify references between types or attributes;</p>
</li>
<li>
<p><strong>system</strong>: contains annotations that concern system properties;</p>
</li>
<li>
<p><strong>view</strong>: contains annotations that mark an interfaces as view;</p>
</li>
<li>
<p><strong>other</strong>: contains annotations like <em>@Type</em>, <em>@EcrIgnore</em> and others, which stand out and cannot be classified into a
group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the 5 entity classes to create custom entity types to serve the needs of your system.The customized entity types reflect the structure of your project or organization and can be created in a flexible way by extending the five entity types of the <em>arveo</em> system.
You can make your class a type and add features by annotating your classes.You can define the custom metadata schema with simple getter and setter methods.</p>
</div>
<div class="paragraph">
<p>To create your first project using <em>arveo</em> you may want to review the following examples and follow the pattern.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="variables"><a class="anchor" href="#variables"></a>Variables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two different ways custom metadata can be stored for an entity: As an attribute, which is defined by a getter
and setter method in the type definition class and gets stored in a separate column in the database, and as a variable,
which are stored in a JSON structure in a system field in the database.Attributes must be defined in the type definition.
Changes to the available attributes require an update of the database schema.Variables can be added and removed without
changing the database schema.</p>
</div>
<div class="paragraph">
<p>It is possible to use variables when searching for an entity, but the available query operations are limited.It is also
not possible to use variables for references like foreign keys.</p>
</div>
<div class="paragraph">
<p>Variables are an optional feature of a type definition that can be enabled by adding the <code>@Variables</code> annotation to the
type interface. To access variables, a getter for the respective system field can be used as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Getter for variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SystemProperty(SystemPropertyName.VARIABLES)
Map&lt;String, Object&gt; getVariables();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The names of variables must comply to the same rules as attribute names as defined by the regular expression
<code>[a-zA-Z][a-zA-Z0-9_]*</code>. Variables do not support null values.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following Java data types are supported for variable values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer</p>
</li>
<li>
<p>Long</p>
</li>
<li>
<p>String</p>
</li>
<li>
<p>Boolean</p>
</li>
<li>
<p>Double</p>
</li>
<li>
<p>LocalDate</p>
</li>
<li>
<p>LocalTime</p>
</li>
<li>
<p>ZonedDateTime</p>
</li>
<li>
<p>UUID</p>
</li>
<li>
<p>Enums</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="storing_variables"><a class="anchor" href="#storing_variables"></a>Storing variables</h3>
<div class="paragraph">
<p>Variables can be stored by providing a <code>Map&lt;String, Object&gt;</code> to the respective input type:</p>
</div>
<div class="listingblock">
<div class="title">Storing variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, Object&gt; variables = Map.of("myVariable", "some value", "myIntVariable", 1);

client = serviceClient.create(
    new TypedContainerInput&lt;&gt;(null, typeInstance, null, variables));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="updating_variables"><a class="anchor" href="#updating_variables"></a>Updating variables</h3>
<div class="paragraph">
<p>To update variables, simply provide a map with the updated values. Other variables that might already be present in the
entity will not be changed.</p>
</div>
<div class="listingblock">
<div class="title">Updating variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, Object&gt; variables = Map.of("myIntVariable", 2, "newVariable", true);

client = client.update(
    new TypedContainerInput&lt;&gt;(
        null,
        serviceClient.createTypeInstance(),
        null,
        variables
    )
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removing_variables"><a class="anchor" href="#removing_variables"></a>Removing variables</h3>
<div class="paragraph">
<p>To remove a variable, set it&#8217;s value to <code>new AttributeNullValue()</code> in an update operation.</p>
</div>
<div class="listingblock">
<div class="title">Removing variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;String, Object&gt; variables = Map.of("newVariable", new AttributeNullValue());

client = client.update(
    new TypedContainerInput&lt;&gt;(
        null,
        serviceClient.createTypeInstance(),
        null,
        variables
    )
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="searching"><a class="anchor" href="#searching"></a>Searching</h3>
<div class="paragraph">
<p>The following examples show how variables can be used when searching for entities.</p>
</div>
<div class="listingblock">
<div class="title">Search for a variable with a specific value</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;TypedContainerClient&lt;RegisteredContainer&gt;&gt; list = serviceClient.where()
    .variable("uuid").withEntityAlias().equalTo().value(uuid).holds().unpaged();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Search for entities that contain a variable with a specific name</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@NotNull List&lt;TypedContainerClient&lt;RegisteredContainer&gt;&gt; list = serviceClient.where()
    .variable("uuid").withEntityAlias().isDefined().holds().unpaged();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Search for entities that do not contain a variable with a specific name</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@NotNull List&lt;TypedContainerClient&lt;RegisteredContainer&gt;&gt; list = serviceClient.where()
    .variable("nosuchvariable").withEntityAlias().isUndefined().holds().unpaged();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inherited_annotations"><a class="anchor" href="#inherited_annotations"></a>Inherited annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certain properties of annotations have a wide usage throughout the code, so it is therefore more convenient to define a certain annotation once for frequent usage.</p>
</div>
<div class="paragraph">
<p>The following is a listing of the interface definition <em>@CustomAnnotation</em>, which defines itself as a system property version id.If you mark a getter-method with this annotation, there is no
need to list the system property name.</p>
</div>
<div class="listingblock">
<div class="title">Listing of the interface @CustomAnnotation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})
@SystemProperty(SystemPropertyName.VERSION_ID)
public @interface CustomAnnotation {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To take advantage of this interface, we annotate getter-methods with it as shown in the listing below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface InterfaceInheritanceExample {

    @SystemProperty(SystemPropertyName.ID)
    DocumentId getId();

    @CustomAnnotation
    VersionId getVersionId();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_entity_types_examples"><a class="anchor" href="#_entity_types_examples"></a>Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="enumeration_example"><a class="anchor" href="#enumeration_example"></a>Enumeration example</h3>
<div class="paragraph">
<p>Define a enum class and use it in a another object type (<a href="#_document_type_example"><strong>Example</strong></a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Enumeration(typeName = "my_enum")
public enum MyEnum {
    ENUM1, ENUM2, ENUM3, ENUM4
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_document_type_example"><a class="anchor" href="#_document_type_example"></a>Document type example</h3>
<div class="listingblock">
<div class="title">Example of a type definition using the object type <em>Document</em></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Type(ObjectType.DOCUMENT) <i class="conum" data-value="1"></i><b>(1)</b>
@RetentionProtected
@ContentElement(defaultDefinition = true, separateField = true)
@OverwriteAllowed
@RecycleBin
@Audit
public interface Resume {
// Immutable identifier documentid of the resume document: unique and readonly
@Unique
@ReadOnly
// alternatively: use autoincrement instead of unique and readonly to let the service create a unique sequence
//@Autoincrement
long getDocumentId(); <i class="conum" data-value="2"></i><b>(2)</b>
void setDocumentId(long value);

// title of the resume document
String getTitle(); <i class="conum" data-value="2"></i><b>(2)</b>
void setTitle(String value);

// relation to Person by person.id()
@ForeignKey (target = Person.class, targetProperty = "id") <i class="conum" data-value="3"></i><b>(3)</b>
String getPersonId();
void setPersonId(String value);

// Multi value with former employers
List&lt;String&gt; getEmployers();
void setEmployers(List&lt;String&gt; employers);

MyEnum getEnum();
void setEnum(MyEnum myEnum);

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Definition of the object type to allow  <em>Document</em> to upload content</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A database column is created for this property with a default name <em>DocumentId</em>. The column is readonly, mandatory, autoincrement and unique. The database creates a sequence of integer values. The value is readonly and so immutable. This allows users and 3rd party applications to identify and find the object. If you leave the <em>@Autoincrement</em> annotation the id must be set on creation and is readonly and immutable from that moment on.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This annotation specifies a foreign key to class Person</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="container_type_example"><a class="anchor" href="#container_type_example"></a>Container type example</h3>
<div class="paragraph">
<p>The following example class is marked as type <em>Container</em>. To use an entity type, we annotate the class using the <em>@Type</em> annotation.</p>
</div>
<div class="listingblock">
<div class="title">Example of an object definition of entity type <em>Container</em></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Type(ObjectType.CONTAINER) <i class="conum" data-value="1"></i><b>(1)</b>
public interface Person {
    String getFirstName(); <i class="conum" data-value="2"></i><b>(2)</b>
    void setFirstName(String value);
    @Name("last_name")  <i class="conum" data-value="3"></i><b>(3)</b>
    String getSurname();
    void setSurname(String value);
    @Unique  <i class="conum" data-value="4"></i><b>(4)</b>
    String getVatNumber();
    void setVatNumber(String value);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Definition of the object type to be <em>Container</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A database column is created for this property with a default name <em>first_name</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This annotation specifies the name of the database column, which is different from the default</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This annotation specifies a unique column, in this case <em>vat_number</em>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="referencing_attributes_by_name"><a class="anchor" href="#referencing_attributes_by_name"></a>Referencing attributes by name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The system creates a column for each attribute of a type definition in the type definition&#8217;s database table. The name
of the column will be a <em>snake case</em> representation of the camel case name of the getter method of the attribute. For
example, the getter <code>getInvoiceNumber</code> will be mapped to an attribute (and a column) named <code>invoice_number</code>. To make it
easy to reference these names in a compile-safe manner, classes with string constants for all type definitions will be
generated automatically. For example, for a type definition class called <code>SimpleInvoice</code> a class named
<code>SimpleInvoiceNames</code> will be generated in the same package as <code>SimpleInvoice</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The classes containing the constants are generated using an annotation processor that is contained in the library
containing the type annotations. The processor is picked up by the compiler automatically.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how these constants can be used to perform a search referencing two different attributes.</p>
</div>
<div class="listingblock">
<div class="title">Example of a search using generated attribute name constants</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        EcrSearchService&lt;SimpleInvoice&gt; searchService = serviceClient.asEntitySearchService(); <i class="conum" data-value="1"></i><b>(1)</b>

        List&lt;SimpleInvoice&gt; list = searchService.where() <i class="conum" data-value="2"></i><b>(2)</b>
            .entity().field(SimpleInvoiceNames.INVOICE_NUMBER).like().value("2021-08-*")
            .and()
            .entity().field(SimpleInvoiceNames.AMOUNT).greaterThan().value(90D)
            .holds()
            .unpaged();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>serviceClient is a <code>TypedDocumentServiceClient</code> obtained using the <code>TypeDefinitionServiceClient</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A query is formulated using the fluent API of the EQL using the attributes invoice_number and amount</td>
</tr>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="permissions.html">Permissions on Type definitions</a></span>
  <span class="next"><a href="entity-annotations.html">Entity annotations</a></span>
</nav>
</article>
  </div>
</main>
    <!-- The Modal -->
    <div id="imageModalBox" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../ui-assets/js/site.js" data-ui-root-path="../../ui-assets"></script>
<script async src="../../ui-assets/js/vendor/highlight.js"></script>
<script async src="../../ui-assets/js/modal.js"></script>
<script src="../../ui-assets/js/vendor/lunr.js"></script>
<script src="../../ui-assets/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../ui-assets/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
