<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Persistence architecture :: arveo Documentation</title>
    <link rel="canonical" href="https://eitco.github.io/arveo-docu/arveo-general/data-storage.html">
    <link rel="prev" href="gobd.html">
    <link rel="next" href="data-deletion.html">
    <meta name="generator" content="Antora 3.2.0-alpha.4">
    <link rel="stylesheet" href="../../ui-assets/css/site.css">
    <link rel="stylesheet" href="../../ui-assets/css/custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand"> 
      <img src="../../ui-assets/img/arveo_WortBildmarke_NEG_500px.png" id="arveoLogo" style="vertical-align:middle;margin:10px 0px">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://eitco.github.io">Home</a>
        <!--<div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>-->
        <!--<div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>-->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="arveo-docu" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="product-summary.html">arveo Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="product-summary.html">What is <em>arveo</em> - Content Services Platform (CSP)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Architecture Overview</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="content-services.html">Content Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="technology-stack.html">Opensource Technology Stack</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="application-security.html">Application security</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="gobd.html">Compliance recommendations (GoBD)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Store</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="data-storage.html">Persistence architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="data-deletion.html">Data deletion</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-getting-started/getting-started.html">Getting Started</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration und Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../arveo-administration/installation.html">Installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/deployment-options.html">Deployment options</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/system-requirements.html">System requirements</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/authentication-oauth2.html">OAuth Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/db-access.html">Database access</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/content-elements-storage.html">Storage locations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/renditions.html">Renditions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/retention-container.html">Retention and Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/encryption.html">Encryption</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/messaging.html">Configure Active MQ</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/maintenance-mode-db-schema.html">Maintenance mode for the database schema</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/audit.html">Audit</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/solr.html">Solr</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/jobs.html">System jobs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-administration/vault.html">Using Hashicorp Vault</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../commons/configuration-properties.html">Configuration Properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../arveo-administration/monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Access Control</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/access-rights.html">Access rights</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/attribute-based-security.html">Attribute Based Access Control (ABAC)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/permissions.html">Permissions on Type definitions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Modelling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/entity-types.html">Entity types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/entity-annotations.html">Entity annotations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/data-types.html">Data types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/system-fields.html">System fields</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/document-types.html">Document types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/container-types.html">Container types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/relation-types.html">Relation types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/folder-types.html">Folder types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/metadata-types.html">Metadata types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/inheritance.html">Inheritance</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/retention-annotations.html">Retention document types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/tenant-separation.html">Tenant separation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/advanced-schema-changes.html">Advanced database schema changes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../arveo-developer/repo-service.html">Repository Service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/repo-service-upload-data.html">Upload Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/repo-service-download-data.html">Download Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/repo-service-delete-objects.html">Delete Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/repo-service-locking.html">Locking</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/repo-service-download-links-external-users.html">Download Links for External Users</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/versioning.html">Versioning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/search-service.html">Search language</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../arveo-developer/retention-introduction.html">Retention</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/retention.html">Retention periods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/retention-cleanup-job.html">Cleanup job</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDKs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/client-sdks-json-serialization.html">Client SDKs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/sdk-and-batch-operations.html">Java SDK for Spring applications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/non-spring-sdk.html">Java SDK for non-Spring applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Events and messaging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/integration-service.html">Enterprise Integration Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Archetypes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/slim-archetype.html">The Types archetype</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../arveo-developer/full-featured-archetype.html">The full-featured archetype</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../arveo-developer/system-tables.html">System Tables</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/compatibility-list.html">Compatibility List</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/release-notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../arveo-commons/glossary.html">Important Terminology</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">arveo Documentation</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="product-summary.html">arveo Documentation</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="product-summary.html">arveo Documentation</a></li>
    <li><a href="product-summary.html">What is <em>arveo</em> - Content Services Platform (CSP)</a></li>
    <li>Data Store</li>
    <li><a href="data-storage.html">Persistence architecture</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Persistence architecture</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>arveo</em> guarantees forgery-proof long term availability of your content and metadata.</p>
</div>
<div class="paragraph">
<p>All revisions of content or metadata are stored as a traceable and immutable version
(<a href="../arveo-developer/versioning.html#<em>versioning_v" class="xref page">Versioning</a>) to the storage systems.
The content service checks the integrity of uploaded content by computing SHA-256 hashes on client and server side.
Additionally, an audit entry is written to the audit log table (<a href="../arveo-administration/audit.html#configure_audit" class="xref page">Audit Log</a>).
_arveo</em> provides a role based access control on object level and allows you to prevent unauthorized access
to content and metadata.</p>
</div>
<div class="paragraph">
<p><em>arveo</em> protects content and metadata by software design. <em>arveo</em> only allows access to
content and metadata via the <em>arveo</em> REST API. As only <em>arveo</em> and highly authorized administrators have
data writer rights for the database and the storage it is impossible that content
is deleted or manipulated by unauthorized persons.</p>
</div>
<div class="paragraph">
<p>Together with <em>arveo</em>'s capabilities to manage the retention periods of documents and records
(<a href="../arveo-developer/retention.html#<em>retention_periods" class="xref page">Retention Periods</a>) _arveo</em> guarantees a  GDPR and/or DSGVO compliant data protection and data privacy.</p>
</div>
<div class="paragraph">
<p><strong><em>arveo</em> meets the the requirements of a revision proof long term archive and is a corner stone for the legal compliance of your IT systems.</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because the new legal data privacy / protection act makes it necessary to erase data even before the expected
retention period has expired <em>arveo</em> does not use hardware retention features.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If needed you can add verifiable evidence records to the documents (signatures, timestamps) to proof the integrity and authenticity
of content and author. The creation of the evidence is not a feature of <em>arveo</em> . It only stores the record together with
the content.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this chapter you will find all information how to setup a secure and legally compliant content service platform
with <em>arveo</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data_types"><a class="anchor" href="#data_types"></a>Data types</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>arveo</em> distinguishes three kinds of data and stores each to the most suitable storage system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Content: <em>arveo</em> stores unstructured content like documents, audio, video and images to
either a cloud object storage or a file system storage.<br>
Most cloud providers like AWS S3, NetAPP ONTAP, EMC Elastic Cloud, etc. provide file system storage or object storage systems.
Object storages are organized in buckets and allow you to store an almost unlimited numbers of objects in a bucket.
<em>arveo</em> accesses the content via REST Standard S3.<br>
For an optimized and fast access of often used content objects <em>arveo</em> can integrate a NoSQL Keyvalue
Cache DB like redis.</p>
</li>
<li>
<p>Structured system properties: containing all primary keys and technical information
about documents, containers and folders. The data has a fix data model and requires highest performance, consistency and
transaction support. <em>arveo</em> saves the data on a relational database.</p>
</li>
<li>
<p>Customer specific metadata: The data model is different for each document, container or folder type. This metadata is
semi structured and new properties might be added during the life cycle of the application.</p>
<div class="ulist">
<ul>
<li>
<p>Eventually consistent customer information: Sometimes the consistency of the data is not important, but we must guarantee a high performance and facets support when we filter by any value without the risk of a full table scan.
<em>arveo</em> saves customer metadata on a NoSQL document DB apache solr 9.4.0 which
is highly efficient for inserting and searching and offers automatic completion and facets.</p>
</li>
<li>
<p>Consistent customer keys: The properties require highest performance, consistancy and
transaction support. <em>arveo</em> saves the data on a relational database.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="high_availability"><a class="anchor" href="#high_availability"></a>High availability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The high availability (HA) of <em>arveo</em> depends highly on the HA of the storage systems for all kind of data. Each of the storage systems and as a result the <em>arveo</em> services follow the CAP (Consistency, Availability and Partition Tolerance) theorem saying that the availability and fail safety of a system depend on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Consistency: All clients see the same content and metadata.</p>
</li>
<li>
<p>Availability: All clients can read and write.</p>
</li>
<li>
<p>Partition Tolerance: the system is fail safe when one or more nodes fail.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/captheorem.png" alt="CAP theorem">
</div>
</div>
<div class="paragraph">
<p>The CAP theorem in a nutshell predicts that you cannot have all three properties but only two of them.</p>
</div>
<div class="paragraph">
<p>As <em>arveo</em> is a ECM cloud platform <strong>consistency</strong> and <strong>availability</strong> (read/write) of content and metadata
are most important. <em>arveo</em> tolerates that network or message failure of either the primary content
storage or database node can cause exceptions on the client application.
The <em>arveo</em> services do not store data within their containers and focus on scalability and partition tolerance.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <em>arveo</em> micro services should be deployed as containers in your cloud environment (e.g. kubernetes) and auto scaling should be implemented.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_data_integrity_1"><a class="anchor" href="#_data_integrity_1"></a>Data integrity</h3>
<div class="paragraph">
<p><em>arveo</em> ensures the immutability and integrity of all your digital content and evidence records by an automated hash check each time content is up- or downloaded.</p>
</div>
</div>
<div class="sect2">
<h3 id="upload"><a class="anchor" href="#upload"></a>Upload</h3>
<div class="paragraph">
<p><strong>Hash-Check:</strong> When you use the upload content API, the client side and content service compute SHA-256 hash for the streamed data.
Only if both values are identical the upload process is successful.
The upload API allows you to pass the expected SHA-256 value and the API will only return OK if the server side hash
matches the expected hash.</p>
</div>
<div class="paragraph">
<p><strong>Verify:</strong> The upload API optionally can verify the uploaded content. The content service downloads the just uploaded stream from the
content storage and compares the hash once again with the expected value (<a href="../arveo-developer/repo-service.html#<em>upload_data" class="xref page">Upload Content</a>).
_arveo</em> stores the hash value in a system property and persists the value in the document type metadata table.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The verify option of the Upload API may slow down your system when uploading a huge amount of data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transactions"><a class="anchor" href="#transactions"></a>Transactions</h3>
<div class="paragraph">
<p>The <em>arveo</em> REST API is stateless and there is no session. That means that all REST API calls are atomic and all database commands are executed within one transaction. <em>arveo</em> guarantees the atomicity of the transactions and to avoid inconsistent states, all aborted transactions are removed and rolled back. Hanging transactions are removed and rolled back to avoid database locks.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The database provider should configure the transaction deadlock timeout on your database to avoid locks on the database that can decrease the performance of your UPDATE and DELETE calls.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="download"><a class="anchor" href="#download"></a>Download</h3>
<div class="paragraph">
<p>When you use the download API (<a href="../arveo-developer#_download_data">Download Content</a>) the client SDK computes the SHA-256 hash of the downloaded stream and compares it to the hash value
in the system property of the document type. If the hash does not match the upload hash value in the database the download fails with a data integrity exception
telling the caller that the data on the storage was most likely manipulated.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
An administrator only can illegally manipulate content if he can access both database and content storage because the control hash value of the content is stored in the database. Take care that none of your administrators has exclusive and unattended access to the content storage and the database.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Distributed management roles of the storage systems and the <em>arveo</em> transparent encryption feature can make your system forgery-proof!
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="content_storage"><a class="anchor" href="#content_storage"></a>Content storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>arveo</em> support evidence proof long term storage of your content and metadata by storing the content legally secure to either a S3 object storage or a file system. The storage must be redundant. Object storage systems like AWS, NetAPP or EMC Elastic Cloud Storage guarantee the long term availability and integrity of your content.</p>
</div>
<div class="paragraph">
<p>All changes of content or metadata are persisted as a traceable and immutable version (<a href="../arveo-developer/versioning.html#<em>versioning_v" class="xref page">Versioning</a>) on your storage system
and an audit entry is written to the audit log table (<a href="../arveo-administration/audit.html#configure_audit" class="xref page">Audit Log</a>).
_arveo</em> creates a version each time metadata including comments and annotations or content of a document is changed by the API <em>arveo</em>} creates a new entry containing the author and the timestamp pf the change in the version management table.
The Update API allows you to add a comment to each version. The Version Management API provides access to all version information and metadata and content of previous versions.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
To ensure that the content is immutable only <em>arveo</em> should have write access to the storage system.<br>
Only authorized data protection officers &amp; administrators should have write-access to the storage system.<br>
In case of very sensible data you can enable encryption (<a href="../arveo-administration/encryption.html#_encryption" class="xref page">Encryption</a>) to follow the data protection rules and prevent your administrators from access of document content.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For best high availability the provider of your storage system must protect the stored data against accidental, malicious, or disaster-induced
loss of data. The better your data replication the better is your availability in case of a failure.</p>
</div>
<div class="sect2">
<h3 id="data_replication_redundancy"><a class="anchor" href="#data_replication_redundancy"></a>Data replication (redundancy)</h3>
<div class="paragraph">
<p>For both supported storages (S3, file system) you can select between different data replication strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Backup or Mirror enables an asynchronous disaster recovery. Your content data is periodically mirrored and the data;</p>
</li>
<li>
<p>Synchronous replication;</p>
</li>
<li>
<p>Asynchronous replication.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fail_safety_consistency_availability"><a class="anchor" href="#fail_safety_consistency_availability"></a>Fail Safety (Consistency, Availability)</h3>
<div class="paragraph">
<p>As <em>arveo</em> stores each version of the content as an immutable object it is not possible that clients will get
outdated data. If the replication is asynchronous it only can happen that clients get a read error.</p>
</div>
<div class="paragraph">
<p>In case the storage is offline <em>arveo</em> is not available and the system has an outage.
In case the storage allows only read access <em>arveo</em> can download content but upload operations fail.</p>
</div>
<div class="paragraph">
<p>If the storage node has a long term outage the potential data loss is limited by the time
that has passed since the last replication and the number of objects stored since that time.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
We strongly recommend using a redundant file system or object storage system. If you do not at least backup your data periodically
a data loss is likely.<br>
For high availability with almost zero data loss
your storage system should replicate the written content and data synchronously.<br>
The operating team of the platform must ensure that an appropriate replication is set up and monitored.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can configure different storage location (Cloud-Storage or on premise) for your content and document types (<a href="../arveo-administration/content-elements-storage.html#_bucketorganizer" class="xref page">Storage Configuration</a>).<br>
Reduce costs by storing non compliant and legally relevant data like PDF/A renditions of documents on storage systems with lower availability and performance SLAs.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Object storages with REST APIs are designed for the cloud. If you decide to use storage from the Cloud (public or private)
we recommend to use object storage via S3 API. Object storages provide a high level of redundancy (even geo redundant) and fail safety.
The REST S3 API is very tolerant against network and infrastructure failures.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="consistent_meta_data_storage_relational_database"><a class="anchor" href="#consistent_meta_data_storage_relational_database"></a>Consistent meta data storage (relational database)</h3>
<div class="paragraph">
<p>The relational database postgreSQL 16.2 is responsible for 100% consistent processing of the structured metadata and transactions.</p>
</div>
<div class="sect3">
<h4 id="data_replication_redundancy_2"><a class="anchor" href="#data_replication_redundancy_2"></a>Data replication (redundancy)</h4>
<div class="paragraph">
<p>For the supported databases postgreSQL 16.2 you can select between different data replication strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Asynchronous replication (backup or mirror): Enables an asynchronous disaster recovery. Your database is periodically mirrored.</p>
</li>
<li>
<p>Synchronous database cluster: Transactions are synchronously replicated on more than one master node.</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The provider of the postgreSQL 16.2 cluster must guarantee that data is stored redundant and reduce potential data loss.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fail_safety_consistency_availability_2"><a class="anchor" href="#fail_safety_consistency_availability_2"></a>Fail safety (consistency, availability)</h3>
<div class="paragraph">
<p>In case the database cluster is down or allows only read access <em>arveo</em> is not available (Deny Of Service/DOS).
If the database has a long term outage and the data files are affected the potential data loss is limited by the time
that has passed since the last replication and the number of objects stored since that time.</p>
</div>
</div>
<div class="sect2">
<h3 id="eventually_consistent_meta_data_storage_nosql_document_database_apache_solr_9_4_0"><a class="anchor" href="#eventually_consistent_meta_data_storage_nosql_document_database_apache_solr_9_4_0"></a>Eventually consistent meta data storage (NoSQL document database apache solr 9.4.0)</h3>
<div class="paragraph">
<p><em>arveo</em> uses modern NoSQL storage technologies to guarantee high search performance and horizontal scalability at
all times. We store semi-structured or dynamic document metadata to a NoSQL document database apache solr 9.4.0.</p>
</div>
<div class="paragraph">
<p>Solr is an open source search platform that has been partially integrated into <em>arveo</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/solr_arveo.png" alt="solr arveo">
</div>
</div>
<div class="paragraph">
<p>Based on the type definitions that are created in <em>arveo</em>, <em>arveo</em> automatically creates a schema
that Solr uses. In addition, for each client that is created in <em>arveo</em>, a new collection is also created in
Solr, so that there is also a separation of data there.</p>
</div>
</div>
<div class="sect2">
<h3 id="data_replication_redundancy_3"><a class="anchor" href="#data_replication_redundancy_3"></a>Data Replication (Redundancy)</h3>
<div class="paragraph">
<p>Setup a cluster of replicated nodes for apache solr 9.4.0. Refer to the apache solr 9.4.0 documentation to
setup a redundant cluster.</p>
</div>
<div class="sect3">
<h4 id="fail_safety_availability_partition_tolerance"><a class="anchor" href="#fail_safety_availability_partition_tolerance"></a>Fail safety (availability, partition tolerance)</h4>
<div class="paragraph">
<p>In case the database cluster is down <em>arveo</em> is still available but free customer searches fail.
In case one database node is down or the database is read only <em>arveo</em> is still available but searches may return outdated results.
If the database has a long term outage and the data files are affected the potential data loss is limited by the time that has passed since the last replication and the number of objects stored since that time.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The provider of the apache solr 9.4.0 cluster must guarantee that data is replicated between the nodes and that the a backup strategy prevents data loss.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustering"><a class="anchor" href="#clustering"></a>Clustering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each <em>arveo</em> service can be configured as a service cluster to achieve HA. Depending on the deployment you can either set up an application server cluster (WAR deployment) or run our containerized applications on a cloud platform like open-stack with kubernetes.</p>
</div>
<div class="sect2">
<h3 id="fail_safety_consistency_availability_3"><a class="anchor" href="#fail_safety_consistency_availability_3"></a>Fail safety (consistency, availability)</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Content services in <em>arveo</em></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Service</th>
<th class="tableblock halign-left valign-top">Failure risks</th>
<th class="tableblock halign-left valign-top">Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Config Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration not available to all nodes, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registry Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service registry not available, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store, edit and version documents and metadata not available, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n, automatic scale up/down by load</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAP Archive Link Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAP archive link not available, SAP outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n, automatic scale up/down by load</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document Conversion Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conversion to PDF/A not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n, automatic scale up/down by load</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enterprise Integration Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job execution paused and integration with external systems not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Federation Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access to external repositories (Documentum, Saperion) not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n, automatic scale up/down by load</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="required_3rd_party_services"><a class="anchor" href="#required_3rd_party_services"></a>Required 3rd party services</h3>
<div class="paragraph">
<p>To operate <em>arveo</em> successfully with high availability the operator of the platform must provide
the following services as a cluster.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Service</th>
<th class="tableblock halign-left valign-top">Failure risks</th>
<th class="tableblock halign-left valign-top">Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Active MQ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asynchronous operations are not triggered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">postgreSQL 16.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access to metadata not available, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n depending on load and configuration of postgreSQL 16.2 cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apache solr 9.4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enterprise search not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2-n depending on load and configuration of apache solr 9.4.0 cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content access not available, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage cluster depending on provider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication Service (optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Login not available via OAUTH2, system outage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring (optional)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ELK (Elasticsearch, Logstash, and Kibana)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
To achieve high availability for <em>arveo</em> the provider must guarantee that all required <a href="content-services.html#_content__services" class="xref page">content services</a> run as a cluster.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="gobd.html">Compliance recommendations (GoBD)</a></span>
  <span class="next"><a href="data-deletion.html">Data deletion</a></span>
</nav>
</article>
  </div>
</main>
    <!-- The Modal -->
    <div id="imageModalBox" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../ui-assets/js/site.js" data-ui-root-path="../../ui-assets"></script>
<script async src="../../ui-assets/js/vendor/highlight.js"></script>
<script async src="../../ui-assets/js/modal.js"></script>
<script src="../../ui-assets/js/vendor/lunr.js"></script>
<script src="../../ui-assets/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../ui-assets/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
